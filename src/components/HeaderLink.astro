---
import { cn } from '../lib/cn'

interface Props {
  href: string
}
const { href } = Astro.props

const currentPath = new URL(Astro.request.url).pathname

function clean(path: string) {
  return path
    .replace(/#.*$/, '')
    .replace(/index\.html$/, '')
    .replace(/\/$/, '')
    .replace(/^\//, '')
    .toLocaleLowerCase()
}

const isActive = clean(currentPath) === clean(href)
---

<a href={href} class={cn({ show: isActive }, 'unset animated-link')}><slot /></a
>
